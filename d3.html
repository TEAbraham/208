<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>D3 Rectangle & Circles Animated</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
  <svg width="1000" height="1000"></svg>

  <script>
    const svg = d3.select("svg");

    const rectWidth = 340;
    const rectHeight = 385;
    const rectX = 200;
    const rectY = 200;

    svg.append("rect")
      .attr("x", rectX)
      .attr("y", rectY)
      .attr("width", rectWidth)
      .attr("height", rectHeight)
      .attr("fill", "white")
      .attr("stroke", "darkgreen")
      .attr("stroke-width", 5);

    const arcLeft = d3.arc()
      .innerRadius(rectHeight / 2 - 0.01)
      .outerRadius(rectHeight / 2)
      .startAngle(-Math.PI)
      .endAngle(-2 * Math.PI);

    const arcRight = d3.arc()
      .innerRadius(rectHeight / 2 - 0.01)
      .outerRadius(rectHeight / 2)
      .startAngle(Math.PI)
      .endAngle(2 * Math.PI);

    const arcTop = d3.arc()
      .innerRadius(rectHeight / 2 - 0.01)
      .outerRadius(rectHeight / 2)
      .startAngle(-1.05)
      .endAngle(1.05);

    // Animate left arc sliding in from the left
    svg.append("path")
      .attr("d", arcLeft)
      .attr("transform", `translate(${rectX - 200}, ${rectY + rectHeight / 2})`)
      .attr("fill", "none")
      .attr("stroke", "darkgreen")
      .attr("stroke-width", 5)
      .transition()
      .duration(1500)
      .attr("transform", `translate(${rectX + 25}, ${rectY + rectHeight / 2})`);

    // Animate right arc sliding in from the right
    svg.append("path")
      .attr("d", arcRight)
      .attr("transform", `translate(${rectX + rectWidth + 200}, ${rectY + rectHeight / 2})`)
      .attr("fill", "none")
      .attr("stroke", "darkgreen")
      .attr("stroke-width", 5)
      .transition()
      .duration(1500)
      .attr("transform", `translate(${rectX + rectWidth - 25}, ${rectY + rectHeight / 2})`);

    // Animate top arc sliding in from above
    svg.append("path")
      .attr("d", arcTop)
      .attr("transform", `translate(${rectX + rectWidth / 2}, ${rectY - 200})`)
      .attr("fill", "white")
      .attr("stroke", "darkgreen")
      .attr("stroke-width", 5)
      .transition()
      .duration(1500)
      .attr("transform", `translate(${rectX + rectWidth / 2}, ${rectY + rectHeight / 2})`);

    // Covering white sidebars
    svg.append("rect")
      .attr("x", 130)
      .attr("y", 300)
      .attr("width", rectWidth/3)
      .attr("height", rectHeight)
      .attr("fill", "white");

    svg.append("rect")
      .attr("x", 160 + rectWidth)
      .attr("y", 300)
      .attr("width", rectWidth/3)
      .attr("height", rectHeight)
      .attr("fill", "white");
  </script>
</body>
</html>
